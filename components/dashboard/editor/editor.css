/* Tiptap Editor Styles */
.ProseMirror {
  color: #d1d5db;
}

/* Override any inline black colors from AI content */
.ProseMirror * {
  color: inherit;
}

/* Text selection highlight - make it visible on dark background */
.ProseMirror ::selection {
  background-color: rgba(99, 102, 241, 0.5); /* indigo with 50% opacity */
  color: #ffffff;
}

.ProseMirror ::-moz-selection {
  background-color: rgba(99, 102, 241, 0.5); /* indigo with 50% opacity */
  color: #ffffff;
}

.ProseMirror p.is-editor-empty:first-child::before {
  color: #6b7280;
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

.ProseMirror h1 {
  font-size: 2.25rem;
  font-weight: 700;
  margin-bottom: 0.5em;
  color: #ffffff;
}

.ProseMirror h2 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  color: #ffffff !important;
}

.ProseMirror h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-top: 1.25em;
  margin-bottom: 0.5em;
  color: #ffffff !important;
}

.ProseMirror h4 {
  font-size: 1.1rem;
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
  color: #e5e7eb !important;
}

.ProseMirror hr {
  border: none;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin: 1.5em 0;
}

.ProseMirror p {
  margin-bottom: 1em;
  color: #d1d5db !important;
  line-height: 1.75;
}

.ProseMirror ul {
  list-style-type: disc;
  padding-left: 1.5em;
  margin-bottom: 1em;
}

.ProseMirror ol {
  list-style-type: decimal;
  padding-left: 1.5em;
  margin-bottom: 1em;
}

.ProseMirror blockquote {
  border-left: 3px solid #4f46e5;
  padding-left: 1rem;
  color: #9ca3af !important;
  font-style: italic;
}

.ProseMirror li {
  color: #d1d5db !important;
  margin-bottom: 0.5em;
}

.ProseMirror strong {
  color: #ffffff !important;
  font-weight: 600;
}

.ProseMirror em {
  color: #d1d5db !important;
}

.ProseMirror table {
  border-collapse: collapse;
  width: 100%;
  margin-bottom: 1em;
}

.ProseMirror tr {
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.ProseMirror td {
  color: #d1d5db !important;
  padding: 0.75rem 1rem;
  vertical-align: top;
}

.ProseMirror td:first-child {
  color: #a5b4fc !important;
  font-weight: 500;
  width: 30%;
}

.ProseMirror pre {
  background-color: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.5rem;
  padding: 1rem;
  margin-bottom: 1em;
  overflow-x: auto;
}

.ProseMirror code {
  color: #a5f3fc;
  font-family:
    ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono",
    monospace;
  font-size: 0.875em;
}

.ProseMirror a {
  color: #60a5fa;
  text-decoration: underline;
}

.ProseMirror a:hover {
  color: #93c5fd;
}

/* Cornell Notes Layout */
.cornell-container {
  max-height: 100%;
}

.cornell-container textarea {
  font-family: inherit;
  line-height: 1.6;
}

.cornell-container textarea:focus {
  outline: none;
}

/* Ensure proper scrolling in Cornell sections */
.cornell-container .ProseMirror {
  min-height: 300px;
  max-height: 100%;
}

/* Outline Mode Container */
.outline-mode-container {
  padding: 1rem;
}

.outline-toolbar {
  position: sticky;
  top: 0;
  z-index: 10;
  background: rgba(10, 10, 10, 0.95);
  backdrop-filter: blur(8px);
}

/* List Styling */
.outline-bullet-list,
.outline-ordered-list,
.outline-task-list {
  margin-left: 0;
  padding-left: 0;
  list-style: none;
}

.outline-list-item {
  position: relative;
  margin: 0.25rem 0;
  padding-left: 1.5rem;
}

/* Indentation levels */
.outline-list-item .outline-list-item {
  margin-left: 2rem;
}

/* Bullet points */
.outline-bullet-list > .outline-list-item::before {
  content: "â€¢";
  position: absolute;
  left: 0.5rem;
  color: #6366f1;
  font-weight: bold;
}

/* Nested bullets */
.outline-bullet-list .outline-bullet-list > .outline-list-item::before {
  content: "â—¦";
  color: #8b5cf6;
}

.outline-bullet-list .outline-bullet-list .outline-bullet-list > .outline-list-item::before {
  content: "â–ª";
  color: #a78bfa;
}

/* Numbered lists */
.outline-ordered-list {
  counter-reset: outline-counter;
}

.outline-ordered-list > .outline-list-item {
  counter-increment: outline-counter;
}

.outline-ordered-list > .outline-list-item::before {
  content: counter(outline-counter) ".";
  position: absolute;
  left: 0;
  color: #6366f1;
  font-weight: 600;
}

/* Task items */
.outline-task-item {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.25rem 0;
}

.outline-task-item input[type="checkbox"] {
  margin-top: 0.25rem;
  width: 1rem;
  height: 1rem;
  cursor: pointer;
  accent-color: #6366f1;
}

.outline-task-item input[type="checkbox"]:checked + div {
  text-decoration: line-through;
  opacity: 0.6;
}

/* Drag and drop cursor */
.ProseMirror-dropcursor {
  border-left: 2px solid #6366f1;
  margin-left: -1px;
}

/* Hover effects */
.outline-list-item:hover {
  background: rgba(255, 255, 255, 0.02);
  border-radius: 0.25rem;
}

/* Focus styles */
.outline-editor-content .ProseMirror:focus {
  outline: none;
}

/* Collapsible indicators */
.outline-list-item.has-children::marker {
  content: "â–¶";
}

.outline-list-item.has-children.expanded::marker {
  content: "â–¼";
}

/* Collapsible content */
.collapsed-content {
  display: none;
}

/* Outline list item wrapper */
.outline-list-item-wrapper {
  margin: 0.125rem 0;
}

.outline-node-content {
  flex: 1;
}

/* ===== Print Styles for PDF Export ===== */
@media print {
  /* Reset to light theme */
  body,
  .ProseMirror,
  .cornell-container,
  .outline-mode-container {
    background: #ffffff !important;
    color: #000000 !important;
  }

  /* Override dark theme text colors */
  .ProseMirror *,
  .cornell-container *,
  .outline-mode-container * {
    color: #000000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Hide non-printable elements */
  [data-html2canvas-ignore],
  .outline-toolbar,
  .ProseMirror-gapcursor,
  button,
  .toolbar,
  [contenteditable="false"] > .mention-tag {
    display: none !important;
  }

  /* Page break control - keep headings with content */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
  }

  /* Avoid breaking inside important elements */
  pre,
  code,
  blockquote,
  table,
  .code-block,
  [data-type="diagram"] {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Orphan and widow control */
  p {
    orphans: 3;
    widows: 3;
  }

  /* Cornell layout - convert to linear for print */
  .cornell-container .grid {
    display: block !important;
  }

  .cornell-container .grid > div {
    border: none !important;
    padding: 16px 0 !important;
    margin-bottom: 16px !important;
  }

  .cornell-container .grid > div:first-child::before {
    content: "ðŸ’¡ Cues & Questions";
    display: block;
    font-size: 14pt;
    font-weight: bold;
    color: #d97706 !important;
    margin-bottom: 8px;
    border-bottom: 2px solid #d97706;
    padding-bottom: 4px;
  }

  .cornell-container .grid > div:last-child::before {
    content: "ðŸ“ Notes";
    display: block;
    font-size: 14pt;
    font-weight: bold;
    color: #4f46e5 !important;
    margin-bottom: 8px;
    border-bottom: 2px solid #4f46e5;
    padding-bottom: 4px;
  }

  .cornell-container > div:last-child::before {
    content: "ðŸ“‹ Summary";
    display: block;
    font-size: 14pt;
    font-weight: bold;
    color: #059669 !important;
    margin-bottom: 8px;
    border-bottom: 2px solid #059669;
    padding-bottom: 4px;
  }

  /* Task list checkboxes - render as symbols */
  .outline-task-item input[type="checkbox"] {
    -webkit-appearance: none;
    appearance: none;
    width: 1em;
    height: 1em;
    border: 1px solid #000;
    display: inline-block;
    position: relative;
    vertical-align: middle;
    margin-right: 6px;
  }

  .outline-task-item input[type="checkbox"]:checked::after {
    content: "âœ“";
    position: absolute;
    top: -2px;
    left: 1px;
    font-size: 12px;
  }

  /* Links - show URL */
  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666 !important;
  }

  /* Internal links - hide URL */
  a[href^="#"]::after,
  a[href^="javascript"]::after {
    content: "";
  }

  /* Code blocks */
  pre {
    background: #f5f5f5 !important;
    border: 1px solid #ddd !important;
    padding: 12px !important;
  }

  code {
    background: #f0f0f0 !important;
  }

  /* Blockquotes */
  blockquote {
    border-left: 3px solid #666 !important;
    padding-left: 12px !important;
    color: #333 !important;
  }

  /* Tables */
  table {
    border-collapse: collapse !important;
  }

  th, td {
    border: 1px solid #ddd !important;
    padding: 8px !important;
  }

  th {
    background: #f0f0f0 !important;
  }

  /* Images */
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }

  /* Diagrams placeholder */
  [data-type="diagram"] {
    background: #f9fafb !important;
    border: 1px dashed #d1d5db !important;
    padding: 20px !important;
    text-align: center;
  }

  [data-type="diagram"]::before {
    content: "[Diagram - View in app for interactive version]";
    color: #6b7280 !important;
    font-style: italic;
  }
}